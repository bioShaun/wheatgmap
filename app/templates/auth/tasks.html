{% extends 'base_auto_refresh.html' %} {% block content %}
<div class="bd-callout bd-callout-info">
  <span>Tasks</span>
</div>

<div class="table-responsive va-info-table" style="margin-bottom: 50px">
  <table
    id="table-tasks"
    class="table"
    style="
      border-bottom: 1px solid #e6e6e6;
      border-top: 1px solid #e6e6e6;
      margin-bottom: 10px;
      word-break: break-all;
      table-layout: fixed;
    "
  >
    <thead>
      <tr>
        <th>Task Name</th>
        <th>Task Type</th>
        <th>Task Status</th>
        <th>Create Time</th>
        <th>Options</th>
      </tr>
    </thead>
    <tbody>
      {% for task_i in my_tasks %}
      <tr>
        <td>{{task_i.task_name}}</td>
        <td>{{task_i.task_type}}</td>
        <td>
          <span
            class="label {% if task_i.task_status == 'finished' %} label-success {% else %} label-warning {% endif %}"
            >{{task_i.task_status}}</span
          >
        </td>
        <td>{{task_i.create_time}}</td>
        <td>
          {%if task_i.task_type == 'upload vcf' %}
          <a
            href="{{ url_for('data.upload_samples', upload_id=task_i.task_id) }}"
          >
            <button
              class="btn btn-info btn-sm {% if task_i.task_status != 'finished'%} disabled {% endif %}"
            >
              Detail
            </button>
          </a>
          {% else %}
          <a href="{{ url_for('main.show_result', task_id=task_i.redis_id) }}">
            <button
              class="btn btn-info btn-sm {% if task_i.task_status != 'finished'%} disabled {% endif %}"
            >
              Detail
            </button>
          </a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="bd-callout bd-callout-warning">
  <span>Tasks</span>
</div>

<p>
  <b
    >Please read the VCF format
    <a href="{{ url_for('document.dataAnalysis')}}">REQUIRMENT</a> before
    upload. VCF is allowed less than 1G.</b
  >
</p>
<table
  class="table"
  style="border-bottom: 1px solid #e6e6e6; margin-bottom: 50px"
>
  <tbody>
    <tr>
      <td>
        <input id="vcf-file" input name="vcfile" type="file" />
        <div class="progress progress-striped active" style="margin-top: 10px">
          <div
            class="progress-bar progress-bar-success"
            role="progressbar"
            aria-valuenow="60"
            aria-valuemin="0"
            aria-valuemax="100"
            style="width: 0%"
          >
            <span class="sr-only">0%</span>
          </div>
        </div>
      </td>
      <td>
        <select
          id="vcf-type"
          class="form-control"
          data-width="20%"
          style="margin: 10px"
        >
          <option value="WGS">WES</option>
          <option value="WES">WGS</option>
          <option value="RNAseq">RNAseq</option>
        </select>
      </td>
      <td>
        <input
          class="btn btn-primary"
          id="vcf-sub"
          type="submit"
          value="Upload"
          style="margin: 10px"
        />
      </td>
    </tr>
  </tbody>
</table>

<div class="bd-callout bd-callout-success">
  <span>Variety Information</span>
</div>
<div class="table-responsive va-info-table fs-13 mb-10">
  <table
    id="table-variety"
    class="table"
    style="
      border-bottom: 1px solid #e6e6e6;
      border-top: 1px solid #e6e6e6;
      margin-bottom: 10px;
      word-break: break-all;
      table-layout: fixed;
    "
  >
    <thead>
      <tr>
        <th>Variety ID</th>
        <th>Variety Name</th>
        <th>Population Type</th>
        <th>Geographic</th>
        <th>Country</th>
        <th>Province</th>
        <th>Affiliation</th>
        <th>Create Time</th>
        <th>Options</th>
      </tr>
    </thead>
    <tbody>
      {% for va_i in variety_items %}
      <tr>
        <td>TC-Va-{{va_i.id}}</td>
        <td>{{va_i.variety_name}}</td>
        <td>{{va_i.variety_type}}</td>
        <td>{{va_i.geographic}}</td>
        <td>{{va_i.country}}</td>
        <td>{{va_i.province}}</td>
        <td>{{va_i.affiliation}}</td>
        <td>{{va_i.create_time}}</td>
        <td>
          <a href="{{ url_for('variety.detail', variety_id=va_i.id) }}">
            <button class="btn btn-info btn-sm fs-13">Detail</button>
          </a>
          <a href="{{ url_for('variety.update', variety_id=va_i.id) }}">
            <button class="btn btn-warning btn-sm fs-13">Edit</button>
          </a>
          <button
            id="{{ url_for('variety.remove', variety_id=va_i.id) }}"
            class="btn btn-danger btn-sm delete-va fs-13"
            va-name="{{va_i.variety_name}}"
          >
            Delete
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<div>
  <a href="{{ url_for('variety.create') }}">
    <button class="btn btn-primary">Add New Variety</button>
    <!-- <input class="btn btn-primary" value="Add New Variety" /> -->
  </a>
</div>

{% endblock %} {% block js %}
<script src="https://unpkg.com/bootstrap-table@1.14.2/dist/bootstrap-table.min.js"></script>
<script src="{{ url_for('static', filename='js/utils/account.js') }}"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}
